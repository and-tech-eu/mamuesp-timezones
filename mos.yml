author: mamuesp
description: Timezone related functions
version: 1.0
platform: esp32
libs_version: ${mos.version}
modules_version: ${mos.version}
mongoose_os_version: ${mos.version}

config_schema:
  - ["timezone", "o", {title: "Timezone info settings"}]
  - ["timezone.enable", "b", true, {title: "Set timezone when initializing the library"}]
  - ["timezone.is_set", "b", false, {title: "Timezone already set? If true, you have to force a reload"}]
  - ["timezone.data_path", "s", "/mnt", {title: "Timezone space where time zone data is stored"}]
  - ["timezone.arch_file", "s", "tz-archive.zip", {title: "The ZIP file containing the data"}]
  - ["timezone.olson", "s", "UTC0", {title: "Current timezone in Olson notation"}]
#
  - ["timezone.latitude", "d", 53.66318, {title: "Timezone coordinates latitude"}]
  - ["timezone.longitude", "d", 7.90991, {title: "Timezone coordinates longitude"}]
  - ["timezone.api_account", "s", "1976", {title: "The API account ID to retreive TZ infos from a location"}]
  - ["timezone.api_url", "s", "https://api.askgeo.com/v1/%s/%s/query.json?points=%f,%f&databases=TimeZone", {title: "The API URL to retreive TZ infos from a location"}]
  - ["timezone.api_key", "s", "eb4f73f23f889de246b8c882449ca605797256b5ac7218e3a4f7147dac3b82b1", {title: "The API key to retreive TZ infos from a location"}]

#  - ["timezone.zipped_data", "b", true, {title: "Use the zipped tzdata archive"}]
#  - ["timezone.delete_unused", "b", true, {title: "If true, the unused files (ZIP or plain) will be deleted to save space"}]

cdefs:
  # Miniz is hungry for stack.
  MGOS_TASK_STACK_SIZE_BYTES: 16384

sources:
  - src

includes:
  - include

filesystem:
  - fs

tags:
  - c

libs:
  - origin: https://github.com/mongoose-os-libs/core
  - origin: https://github.com/mongoose-os-libs/miniz

manifest_version: 2017-09-29
platforms: [ esp8266,esp32 ]
